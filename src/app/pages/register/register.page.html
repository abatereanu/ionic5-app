<ion-header>
  <ion-toolbar>
    <ion-title>register</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-row>
    <ion-col size="12" size-sm="10" offset-sm="1" size-md="8" offset-md="2" size-lg="6" offset-lg="3" size-xl="4"
             offset-xl="4">
      <ion-card>
        <ion-card-header>
          <ion-card-title class="ion-text-center">Create an account</ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <form [formGroup]="registerForm" (ngSubmit)="createUser(registerForm.value)">
            <mat-form-field style="width: 100%;">
              <mat-label>Username</mat-label>
              <input matInput type="text" formControlName="username">
              <mat-error *ngIf="registerForm.hasError('required', ['username'])">Enter an username</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 100%;">
              <mat-label>Password</mat-label>
              <input matInput type="password" formControlName="password">
              <mat-error *ngIf="registerForm.hasError('required', ['password'])">Enter a password</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 100%;">
              <mat-label>Repeat password</mat-label>
              <input matInput type="password" formControlName="confirmPassword">
              <mat-error *ngIf="registerForm.hasError('required', ['confirmPassword'])">Confirm password</mat-error>
              <mat-error *ngIf="registerForm.hasError('passwordNotMatch', ['confirmPassword'])">Password does not match</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill" style="width: 100%">
              <mat-label>Select Role</mat-label>
              <mat-select formControlName="rolesControl" name="role" multiple panelClass="select-color">
                <mat-option *ngFor="let role of roles" [value]="role" class="role-option">
                  {{role.toLowerCase()}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="registerForm.get('rolesControl').hasError('required')">Please choose one or more roles</mat-error>
            </mat-form-field>
            <ion-button [disabled]="registerForm.untouched || registerForm.invalid" type="submit" expand="block">Register</ion-button>
          </form>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>

</ion-content>
